<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- My Cart Dropdown Trigger -->
<div class="dropdown">
    <a class="text-decoration-none text-dark dropdown-toggle" href="#" id="cartDropdown" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-cart fs-3"></i>
      <span class="badge beg bg-success position-absolute top-0 start-100 translate-middle p-1">0</span>
      <span>My Cart</span>
      <span class="my-cart-total">€0.00</span>
    </a>

  
    <!-- Dropdown Menu for Cart Details -->
    <div class="dropdown-menu p-3" aria-labelledby="cartDropdown" style="min-width: 250px;">
      <div class="cart-items">
        <!-- Items will be added here dynamically -->
        <p class="text-center">Your cart is empty.</p>
      </div>
      <hr>
      <div class="d-flex justify-content-between">
        <strong>SUBTOTAL:</strong>
        <span class="cart-subtotal">€0.00</span>
      </div>
      <div class="mt-3">
        <a href="#" class="btn btn-success w-100 mb-2">View Cart</a>
        <a href="#" class="btn btn-primary w-100">Checkout</a>
      </div>
    </div>
  </div>
  <!-- Add to Cart Button -->
<button class="btn btn-primary add-to-cart" data-name="Broccoli and Cauliflower Mix" data-price="12" data-image="https://groffer.modeltheme.com/wp-content/uploads/2023/01/Angro-Product05-400x400.jpg">
    Add to Cart
  </button>
  
<script>
    // Initialize an empty cart
let cart = [];

// Function to update the cart display
function updateCart() {
  const cartCount = document.querySelector('.badge.beg'); // Cart count element
  const cartTotal = document.querySelector('.my-cart-total'); // Cart total element
  const cartItemsContainer = document.querySelector('.cart-items'); // Cart items container
  const cartSubtotal = document.querySelector('.cart-subtotal'); // Cart subtotal

  // Update the number of items in the cart
  cartCount.textContent = cart.length;

  // Calculate the total price
  const total = cart.reduce((sum, item) => sum + item.price, 0);
  cartTotal.textContent = `€${total.toFixed(2)}`;
  cartSubtotal.textContent = `€${total.toFixed(2)}`;

  // Update the cart items in the dropdown
  if (cart.length === 0) {
    cartItemsContainer.innerHTML = '<p class="text-center">Your cart is empty.</p>';
  } else {
    cartItemsContainer.innerHTML = cart
      .map(
        (item, index) => `
          <div class="d-flex justify-content-between align-items-center">
            <img src="${item.image}" alt="${item.name}" width="50">
            <div class="ms-2">
              <strong>${item.name}</strong>
              <div>1 × €${item.price.toFixed(2)}</div>
            </div>
            <button class="btn btn-link text-danger p-0" onclick="removeFromCart(${index})">
              <i class="bi bi-x"></i>
            </button>
          </div>
          <hr>
        `
      )
      .join('');
  }
}

// Function to add an item to the cart
function addToCart(name, price, image) {
  cart.push({ name, price, image }); // Add item to the cart
  updateCart(); // Update the cart display
}

// Function to remove an item from the cart
function removeFromCart(index) {
  cart.splice(index, 1); // Remove item from the cart array
  updateCart(); // Update the cart display
}

// Attach event listeners to the "Add to Cart" buttons
document.querySelectorAll('.add-to-cart').forEach(button => {
  button.addEventListener('click', () => {
    const name = button.getAttribute('data-name');
    const price = parseFloat(button.getAttribute('data-price'));
    const image = button.getAttribute('data-image');
    addToCart(name, price, image);
  });
});

// Initial cart update
updateCart();

</script>  
</body>
</html>